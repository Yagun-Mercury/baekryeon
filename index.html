<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë°±ë ¨ì‚° ì—­í•  ë¶„ë°°ê¸°</title>
  <style>
    body { font-family: Arial; padding: 20px; }
    .hidden { display: none; }
    .role-box { border: 1px solid #ccc; padding: 10px; margin: 5px 0; border-radius: 5px; cursor: pointer; }
    .role-box:hover { background-color: #f5f5f5; }
    .reveal { color: green; font-weight: bold; }
  </style>
</head>
<body>
  <h2>ğŸ² ë°±ë ¨ì‚° ì—­í•  ë¶„ë°°ê¸° (ê³µê°œ ì—­í•  + ë¹„ê³µê°œ ì†Œì†)</h2>

  <label>í•™ìƒíšŒ ì¸ì› ìˆ˜: <input type="number" id="studentCount" value="14"></label><br>
  <label>ìœ„í˜‘ ì¸ì› ìˆ˜: <input type="number" id="threatCount" value="4"></label><br>
  <label>ì´ì‚¬íšŒ ì¸ì› ìˆ˜: <input type="number" id="councilCount" value="3"></label><br><br>

  <button onclick="assignRoles()">ì—­í•  ë¶„ë°°í•˜ê¸°</button>

  <h3>âœ… ë“±ì¥ì¸ë¬¼ ì„ íƒ</h3>
  <div id="checkboxContainer"></div>

  <h3>ğŸ§¾ ë¶„ë°° ê²°ê³¼</h3>
  <div id="result"></div>

  <script>
    const characters = [
      "í•™ìƒíšŒì¥", "ì „êµ 1ë“±", "ì „êµ 2ë“±", "ì„ ë„ë¶€ì¥", "ì²´ìœ¡ë¶€ì¥", "ë°©ì†¡ë¶€", "ì¶•êµ¬ë¶€ ì£¼ì¥",
      "ì‹œë°±ì˜ ì™¼íŒ”", "ì‹œë°±ì˜ ì˜¤ë¥¸íŒ”", "ë¶ˆëŸ‰í•™ìƒ", "ì „í•™ìƒ", "êµì¥ì„ ìƒë‹˜", "í•™ìƒì£¼ì„",
      "ì–‘í˜¸ì„ ìƒë‹˜", "êµìƒì„ ìƒë‹˜", "ë¯¸ìˆ ì„ ìƒë‹˜", "ìœ¤ë¦¬ì„ ìƒë‹˜", "ì‚¬ì„œì„ ìƒë‹˜", "ì˜ì–‘ì‚¬",
      "ê²½ë¹„ì•„ì €ì”¨", "í•´ì»¤", "ë³´ì•ˆê´€", "íŒ¨ì…˜ì™•", "í…Œí¬ìœ íŠœë²„", "ë°´ë“œë¶€ ë³´ì»¬", "ë§¤ì  ìíŒê¸°",
      "ë°±ë ¨ì‚° ë„ì‚¬", "ë°±ë ¨ì‚° ì•„ê¸°ê³°"
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function renderCheckboxes() {
      const container = document.getElementById("checkboxContainer");
      characters.forEach((char, idx) => {
        const id = `char-${idx}`;
        container.innerHTML += `<input type="checkbox" id="${id}" value="${char}" checked>
                                <label for="${id}">${char}</label><br>`;
      });
    }

    function assignRoles() {
      const studentCount = parseInt(document.getElementById("studentCount").value);
      const threatCount = parseInt(document.getElementById("threatCount").value);
      const councilCount = parseInt(document.getElementById("councilCount").value);
      const total = studentCount + threatCount + councilCount;

      const checked = Array.from(document.querySelectorAll("#checkboxContainer input:checked"))
                          .map(cb => cb.value);

      if (checked.length < total) {
        alert("ì„ íƒëœ ë“±ì¥ì¸ë¬¼ì´ ì†Œì† ì¸ì› ìˆ˜ë³´ë‹¤ ì ìŠµë‹ˆë‹¤.");
        return;
      }

      shuffle(checked);

      const selected = checked.slice(0, total);
      const factions = [];
      for (let i = 0; i < studentCount; i++) factions.push("í•™ìƒíšŒ");
      for (let i = 0; i < threatCount; i++) factions.push("ìœ„í˜‘");
      for (let i = 0; i < councilCount; i++) factions.push("ì´ì‚¬íšŒ");
      shuffle(factions);

      const resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "";

      selected.forEach((char, idx) => {
        const faction = factions[idx];
        const div = document.createElement("div");
        div.className = "role-box";
        div.innerHTML = `<strong>${idx + 1}ë²ˆ ìë¦¬:</strong> ${char}
                         <div class="hidden">ğŸ”’ ì†Œì†: <span class="reveal">${faction}</span></div>`;
        div.onclick = function () {
          const hiddenDiv = this.querySelector(".hidden");
          if (hiddenDiv.style.display === "block") {
            hiddenDiv.style.display = "none";
          } else {
            hiddenDiv.style.display = "block";
          }
        };
        resultDiv.appendChild(div);
      });
    }

    renderCheckboxes();
  </script>
</body>
</html>
